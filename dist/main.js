(()=>{"use strict";class t{constructor({name:t,link:e},i,n){this._name=t,this._link=e,this._cardSelector=n,this._handleCardClick=i}_setEventListeners(){this._cardElement.querySelector(".cards__like-button").addEventListener("click",(()=>{this._handLikeIcon()})),this._cardElement.querySelector(".cards__delete").addEventListener("click",(()=>{this._handleDeleteIcon()})),this._cardImageElement.addEventListener("click",(()=>this._handleCardClick({name:this._name,link:this._link})))}_handLikeIcon(){this._cardElement.querySelector(".cards__like-button").classList.toggle("cards__like-button_active")}_handleDeleteIcon(){this._cardElement.remove(),this._cardElement=null}getCard(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".cards__content").cloneNode(!0),this._cardImageElement=this._cardElement.querySelector(".cards__image"),this._cardElementTitle=this._cardElement.querySelector(".cards__description-text"),this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._cardElementTitle.textContent=this._name,this._setEventListeners(),this._cardElement}}const e=class{constructor(t,e){this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._form=e}_showErrorMessage(t){const e=this._form.querySelector(`#${t.id}-error`);e.textContent=t.validationMessage,e.classList.add(this._errorClass),t.classList.add(this._inputErrorClass)}_hideErrorMessage(t){const e=this._form.querySelector(`#${t.id}-error`);e.textContent="",e.classList.remove(this._errorClass),t.classList.remove(this._inputErrorClass)}_toggleButtonState(){return this._hasInvalidInput(this._inputElements)?this.disableButton():this.enableButton()}_hasInvalidInput(t){return!t.every((t=>t.validity.valid))}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_checkInputValidity(t){if(!t.validity.valid)return this._showErrorMessage(t);this._hideErrorMessage(t)}_setEventListeners(){this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputElements.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(t=>{t.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputElements.forEach((t=>{this._hideErrorMessage(t)}))}},i=(document.querySelector("#card-template").content.querySelector(".cards__content"),document.querySelector(".cards__list")),n=document.querySelector("#modal-edit-form"),o=document.querySelector("#profile-edit-modal"),r=document.querySelector("#profile-add-modal"),s=document.querySelector("#modal-form-add"),a=document.querySelector("#image-modal"),l=document.querySelector(".profile__edit-button"),d=(o.querySelector(".modal__close"),document.querySelector(".profile__content-name")),c=document.querySelector(".profile__content-subtitle"),u=document.querySelector(".modal__name"),m=document.querySelector(".modal__bio"),_=document.querySelector(".profile__add-button"),h=document.querySelector(".modal__image-caption"),f=document.querySelector(".modal__add"),p=document.querySelector(".modal__link"),b=a.querySelector(".modal__image");function E(t){"Escape"===t.key&&y(document.querySelector(".modal_opened"))}function v(t){t.classList.add("modal_opened"),document.addEventListener("keydown",E),t.addEventListener("mousedown",S)}function y(t){t.classList.remove("modal_opened"),document.removeEventListener("keydown",E),t.removeEventListener("mousedown",S)}function S(t){(t.target.classList.contains("modal")||t.target.classList.contains("modal__close"))&&y(t.currentTarget)}function x(t){b.src=t.link,b.alt=t.name,h.textContent=t.name,v(a)}function q(e){const n=new t(e,x,"#card-template").getCard();i.prepend(n)}n.addEventListener("submit",(function(t){t.preventDefault(),d.textContent=u.value,c.textContent=m.value,y(o)})),s.addEventListener("submit",(function(t){t.preventDefault(),q({name:f.value,link:p.value}),y(r),s.reset()})),l.addEventListener("click",(()=>{u.value=d.textContent.trim(),m.value=c.textContent.trim(),k.resetValidation(),v(o)})),[{name:"Mt Hood",link:"https://images.unsplash.com/photo-1663947718266-e5cfe7e95271?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=987&q=80"},{name:"Multnomah Falls",link:"https://images.unsplash.com/photo-1657518860188-daa43c146ed8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=987&q=80"},{name:"Diablo Lake",link:"https://images.unsplash.com/photo-1521400259647-cec809312f3f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1674&q=80"},{name:"Mt Rainier",link:"https://images.unsplash.com/photo-1568226292321-dd67ff8b3b2b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1674&q=80"},{name:"Mt St Helens",link:"https://images.unsplash.com/photo-1616684553557-82371dfba65f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=986&q=80"},{name:"Oregon Coast",link:"https://images.unsplash.com/photo-1602966287996-dbdb3d69d36c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=987&q=80"}].forEach((t=>{q(t)})),_.addEventListener("click",(()=>{L.resetValidation(),v(r)}));const g=o.querySelector("#modal-edit-form"),B=r.querySelector("#modal-form-add"),w={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},k=new e(w,g),L=new e(w,B);k.enableValidation(),L.enableValidation()})();